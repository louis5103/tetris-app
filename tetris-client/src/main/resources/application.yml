# =============================================================================
# 테트리스 게임 통합 설정 (Tetris Game Unified Configuration)
# =============================================================================
# 
# 설정 계층:
# 1. application.yml (이 파일) - 정적 설정: 개발자가 정의하는 기본값
# 2. tetris_settings (루트)    - 동적 설정: 사용자가 변경하는 런타임 값
# 
# =============================================================================

# =============================================================================
# Spring Boot 기본 설정
# =============================================================================
spring:
  application:
    name: Tetris Desktop Game
  
  profiles:
    active: desktop-client
  
  # Banner 설정
  main:
    banner-mode: console
  banner:
    location: classpath:banner.txt
  
  # Internationalization
  messages:
    basename: messages
    encoding: UTF-8
  
  # JPA 설정 (H2 데이터베이스)
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        format_sql: true
  
  # H2 데이터베이스 설정
  datasource:
    url: jdbc:h2:file:./data/tetris;AUTO_SERVER=TRUE
    driver-class-name: org.h2.Driver
    username: sa
    password:
  
  h2:
    console:
      enabled: true
      path: /h2-console

# =============================================================================
# JavaFX 설정
# =============================================================================
javafx:
  preloader:
    enabled: false
  stage:
    resizable: false
    always-on-top: false

# =============================================================================
# 테트리스 게임 설정
# =============================================================================
tetris:
  # ---------------------------------------------------------------------------
  # 난이도 시스템 설정 (Difficulty System) ✨ NEW
  # ---------------------------------------------------------------------------
  difficulty:
    # Easy 모드 설정
    easy:
      display-name: "쉬움"
      # I형 블록 출현 확률 배율 (1.0 = 14.3%, 1.2 = 17.1%)
      i-block-multiplier: 1.2
      # 레벨업 시 속도 증가율 배율 (0.8 = 20% 감소)
      speed-increase-multiplier: 0.8
      # 점수 배율 (1.2 = 20% 증가)
      score-multiplier: 1.2
      # 락 딜레이 배율 (1.2 = 20% 증가)
      lock-delay-multiplier: 1.2
      
    # Normal 모드 설정 (기본값)
    normal:
      display-name: "보통"
      i-block-multiplier: 1.0
      speed-increase-multiplier: 1.0
      score-multiplier: 1.0
      lock-delay-multiplier: 1.0
      
    # Hard 모드 설정
    hard:
      display-name: "어려움"
      # I형 블록 출현 확률 배율 (0.8 = 20% 감소)
      i-block-multiplier: 0.8
      # 레벨업 시 속도 증가율 배율 (1.2 = 20% 증가)
      speed-increase-multiplier: 1.2
      # 점수 배율 (0.8 = 20% 감소)
      score-multiplier: 0.8
      # 락 딜레이 배율 (0.8 = 20% 감소)
      lock-delay-multiplier: 0.8
  
  # ---------------------------------------------------------------------------
  # 7-bag 시스템 설정 ✨ NEW
  # ---------------------------------------------------------------------------
  bag-system:
    # 가방 크기 (기본 7개)
    bag-size: 7
    # Easy 모드에서 I블록 추가 확률 (20%)
    easy-i-block-add-chance: 0.2
    # Hard 모드에서 I블록 제거 확률 (20%)
    hard-i-block-remove-chance: 0.2
  
  # ---------------------------------------------------------------------------
  # 애니메이션 설정 ✨ NEW
  # ---------------------------------------------------------------------------
  animation:
    line-clear:
      # 깜빡임 횟수
      flash-count: 3
      # 깜빡임 간격 (밀리초)
      flash-duration-ms: 200
      # 페이드아웃 시간 (밀리초)
      fade-duration-ms: 300
      # 애니메이션 활성화 여부
      enabled: true
  
  # ---------------------------------------------------------------------------
  # 게임 기본 설정 (Game Configuration)
  # ---------------------------------------------------------------------------
  game:
    # 초기 레벨 (환경 변수로 오버라이드 가능)
    initial-level: ${TETRIS_GAME_INITIAL_LEVEL:1}
    # 최대 레벨
    max-level: ${TETRIS_GAME_MAX_LEVEL:15}
    # 레벨당 필요한 라인 수
    lines-per-level: ${TETRIS_GAME_LINES_PER_LEVEL:10}
    # 초기 드롭 간격 (밀리초)
    initial-drop-interval: ${TETRIS_GAME_INITIAL_DROP_INTERVAL:1000}
  
  # ---------------------------------------------------------------------------
  # 사운드 설정 (Sound Configuration)
  # ---------------------------------------------------------------------------
  sound:
    # 사운드 활성화 여부
    enabled: ${TETRIS_SOUND_ENABLED:true}
    # 사운드 볼륨 (0 ~ 100, SettingsService 스케일)
    volume: ${TETRIS_SOUND_VOLUME:80}
  
  # ---------------------------------------------------------------------------
  # UI 설정 (UI Configuration)
  # ---------------------------------------------------------------------------
  ui:
    # UI 테마
    theme: ${TETRIS_UI_THEME:dark}
    # 색상 모드 (colorModeDefault, rg_blind, yb_blind)
    color-mode: ${TETRIS_UI_COLOR_MODE:colorModeDefault}
    # 화면 크기 (screenSizeXS, screenSizeS, screenSizeM, screenSizeL, screenSizeXL)
    screen-size: ${TETRIS_UI_SCREEN_SIZE:screenSizeM}
    # 스테이지 기본 너비
    stage-width: ${TETRIS_UI_STAGE_WIDTH:500}
    # 스테이지 기본 높이
    stage-height: ${TETRIS_UI_STAGE_HEIGHT:700}
    # ✨ Phase 5: 난이도 기본값 (difficultyEasy, difficultyNormal, difficultyHard)
    difficulty: ${TETRIS_UI_DIFFICULTY:difficultyNormal}
    # 애니메이션 활성화
    animation:
      enabled: ${TETRIS_UI_ANIMATION_ENABLED:true}
    # 그리드 표시 여부
    show-grid: ${TETRIS_UI_SHOW_GRID:true}
    # 고스트 피스 표시 여부
    show-ghost-piece: ${TETRIS_UI_SHOW_GHOST_PIECE:true}
  
  # ---------------------------------------------------------------------------
  # 점수 설정 (Score Configuration)
  # ---------------------------------------------------------------------------
  score:
    # 1줄 삭제 점수
    single-line: ${TETRIS_SCORE_SINGLE_LINE:100}
    # 2줄 삭제 점수
    double-line: ${TETRIS_SCORE_DOUBLE_LINE:300}
    # 3줄 삭제 점수
    triple-line: ${TETRIS_SCORE_TRIPLE_LINE:500}
    # 4줄 삭제 점수 (테트리스)
    tetris-line: ${TETRIS_SCORE_TETRIS_LINE:800}
  
  # ---------------------------------------------------------------------------
  # 저장 설정 (Save Configuration)
  # ---------------------------------------------------------------------------
  save:
    # 자동 저장 여부
    auto-save: ${TETRIS_SAVE_AUTO_SAVE:true}
    # 저장 위치
    location: ${TETRIS_SAVE_LOCATION:${user.home}/.tetris/}
  
  # ---------------------------------------------------------------------------
  # 게임 모드 설정 (Game Mode Configuration)
  # ---------------------------------------------------------------------------
  mode:
    # Play Type: LOCAL_SINGLE, ONLINE_MULTI
    play-type: ${GAME_MODE_PLAY_TYPE:LOCAL_SINGLE}
    # Gameplay Type: CLASSIC, ARCADE
    gameplay-type: ${GAME_MODE_GAMEPLAY_TYPE:CLASSIC}
    # SRS (Super Rotation System) 활성화
    srs-enabled: ${GAME_MODE_SRS_ENABLED:true}
    
    # 마지막 선택 설정 (자동 저장)
    last-play-type: ${GAME_MODE_LAST_PLAY_TYPE:LOCAL_SINGLE}
    last-gameplay-type: ${GAME_MODE_LAST_GAMEPLAY_TYPE:CLASSIC}
    last-srs-enabled: ${GAME_MODE_LAST_SRS_ENABLED:true}
    
    # 아이템 드롭 확률 (0.0 ~ 1.0)
    item-drop-rate: ${ITEM_DROP_RATE:0.1}
    # 최대 인벤토리 크기
    max-inventory-size: ${ITEM_MAX_INVENTORY:3}
    # 아이템 자동 사용
    item-auto-use: ${ITEM_AUTO_USE:false}
    
    # 아이템 활성화 설정
    item-enabled:
      BOMB: ${ITEM_ENABLED_BOMB:true}
      PLUS: ${ITEM_ENABLED_PLUS:true}
      SPEED_RESET: ${ITEM_ENABLED_SPEED_RESET:true}
      BONUS_SCORE: ${ITEM_ENABLED_BONUS_SCORE:true}

# =============================================================================
# 로깅 설정 (Logging Configuration)
# =============================================================================
logging:
  level:
    root: INFO
    seoultech.se: DEBUG
    org.springframework: INFO
    org.hibernate: WARN

---
# =============================================================================
# 개발 환경 프로파일 (Development Profile)
# =============================================================================
spring:
  config:
    activate:
      on-profile: dev

# 개발 환경 전용 설정
tetris:
  difficulty:
    easy:
      # 개발/테스트를 위해 I형 블록을 더 많이 출현
      i-block-multiplier: 1.5
      # 속도를 더 느리게
      speed-increase-multiplier: 0.6
    hard:
      # 개발/테스트를 위해 I형 블록을 더 적게 출현
      i-block-multiplier: 0.6
      # 속도를 더 빠르게
      speed-increase-multiplier: 1.5

# 개발 환경 로깅 (디버그 모드)
logging:
  level:
    seoultech.se: TRACE
    org.springframework: DEBUG

---
# =============================================================================
# 테스트 환경 프로파일 (Test Profile)
# =============================================================================
spring:
  config:
    activate:
      on-profile: test

# 테스트 환경 전용 설정 (극단적인 값으로 테스트)
tetris:
  difficulty:
    easy:
      # 테스트: 극단적으로 I형 블록을 많이 출현
      i-block-multiplier: 2.0
      # 속도 증가 거의 없음
      speed-increase-multiplier: 0.5
      # 점수 2배
      score-multiplier: 2.0
    hard:
      # 테스트: 극단적으로 I형 블록을 적게 출현
      i-block-multiplier: 0.5
      # 속도 증가 2배
      speed-increase-multiplier: 2.0
      # 점수 절반
      score-multiplier: 0.5
  
  # 테스트 환경에서는 애니메이션 비활성화 (속도 향상)
  animation:
    line-clear:
      enabled: false

# 테스트 환경 로깅
logging:
  level:
    seoultech.se: DEBUG
    org.springframework: WARN
